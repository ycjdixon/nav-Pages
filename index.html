<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- ... 原CSS代码 ... -->
</head>
<body>
    <!-- ... 原HTML body代码 ... -->
    
    <script>
        let searchEngine = 'baidu';
        // 注意：这里去掉了原代码中的环境变量注入
        let currentCate = '常用';

        document.addEventListener('DOMContentLoaded', () => {
            showCate('常用');
            // ... 原JS代码的其他部分 ...
        });

        // ... 原JS函数代码 ...

        // 修改以下函数，移除环境变量依赖
        async function checkPwd() {
            const input = document.getElementById('pwdInput').value;
            // 通过API验证密码，而不是直接比较
            const res = await fetch('/api/check-pwd', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ password: input })
            });
            
            if (res.ok) {
                document.getElementById('pwdSection').style.display = 'none';
                document.getElementById('editSection').style.display = 'block';
                loadCateToEditor();
            } else {
                alert('密码错误！请重新输入');
                document.getElementById('pwdInput').value = '';
                document.getElementById('pwdInput').focus();
            }
        }

        async function save() {
            const cate = document.getElementById('cateSelect').value;
            const content = document.getElementById('editor').value;
            // 保存时也需要传递密码进行验证
            const password = document.getElementById('pwdInput').value;
            
            const res = await fetch('/api/save?cate=' + cate, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ content: content, password: password })
            });
            
            if (res.ok) {
                alert('保存成功！');
                showCate(cate);
                closeModal();
            } else {
                alert('保存失败！');
            }
        }
    </script>
</body>
</html>